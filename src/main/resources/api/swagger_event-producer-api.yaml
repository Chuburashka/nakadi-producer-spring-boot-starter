swagger: '2.0'
info:
  title: Nakadi Event Producer API
  description: |
      This API will be used by Operators to trigger snapshot events from a producer, which
      need to be published to Nakadi.
  version: '0.1'

paths:
  /events/snapshots/{event_type}:
    parameters:
      - $ref: '#/parameters/Flow-Id'
      - $ref: '#/parameters/event_type'
    post:
      description:
        Creates snapshot events of given data type at the producer's site.
      responses:
        '201':
          description: OK, Creation is done.
        # other 4xx/5xx responses are possible too.
parameters:
  Flow-Id:
    name: X-Flow-ID
    description: |
      A custom header that will be used for logging, and passed onto any
      further requests and can be used for diagnosing.
    in: header
    type: string
    required: false
  event_type:
    type: string
    in: path
    name: event_type
    required: true
    description: the type of events we want to create a snapshot of. (event type is an event channel topic name)

definitions:
  Problem:
    type: object
    properties:
      type:
        type: string
        format: uri
        description: |
          An absolute URI that identifies the problem type.  When dereferenced,
          it SHOULD provide human-readable documentation for the problem type
          (e.g., using HTML).
        example: http://httpstatus.es/503
      title:
        type: string
        description: |
          A short, summary of the problem type. Written in english and readable
          for engineers (usually not suited for non technical stakeholders and
          not localized); example: Service Unavailable
      status:
        type: integer
        format: int32
        description: |
          The HTTP status code generated by the origin server for this occurrence
          of the problem.
        example: 503
      detail:
        type: string
        description: |
          A human readable explanation specific to this occurrence of the
          problem.
        example: Connection to database timed out
      instance:
        type: string
        format: uri
        description: |
          An absolute URI that identifies the specific occurrence of the problem.
          It may or may not yield further information if dereferenced.
    required:
      - type
      - title
      - status
